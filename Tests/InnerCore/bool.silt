-- RUN: %silt --dump irgen %s 2>&1 | %FileCheck %s

-- CHECK: ; ModuleID = 'bool'
module bool where

data Bool : Type where
  false : Bool
  true : Bool

-- CHECK: define i1 @"_S4bool4_&&_4bool4BoolD4bool4BoolD_4bool4BoolDtfF"(i1, i1) {
_&&_ : Bool -> Bool -> Bool
-- CHECK:   "_S4bool4_&&_4bool4BoolD4bool4BoolD_4bool4BoolDtfF":
-- CHECK:   switch i1 %0, label %trap [
-- CHECK:       i1 true, label %"_S4bool9#col0row0ByfF"
-- CHECK:       i1 false, label %"_S4bool9#col0row1ByfF"
-- CHECK:   ]
-- CHECK-DAG:   "_S4bool9#col0row1ByfF":
-- CHECK-DAG:     ret i1 %1
true && x = x
-- CHECK-DAG:   "_S4bool9#col0row0ByfF":
-- CHECK-DAG:     ret i1 false
false && _ = false
-- CHECK:   trap:
-- CHECK:     unreachable
-- CHECK:   }

-- CHECK: define i1 @"_S4bool4_||_4bool4BoolD4bool4BoolD_4bool4BoolDtfF"(i1, i1) {
_||_ : Bool -> Bool -> Bool

-- CHECK: "_S4bool4_||_4bool4BoolD4bool4BoolD_4bool4BoolDtfF":
-- CHECK:   switch i1 %0, label %trap [
-- CHECK:     i1 true, label %"_S4bool9#col0row0ByfF"
-- CHECK:     i1 false, label %"_S4bool9#col0row1ByfF"
-- CHECK:   ]
-- CHECK-DAG: "_S4bool9#col0row1ByfF":
-- CHECK-DAG:   ret i1 true
true || _ = true
-- CHECK-DAG: "_S4bool9#col0row0ByfF":
-- CHECK-DAG:   ret i1 %1
false || x = x
-- CHECK: trap:
-- CHECK:   unreachable
-- CHECK: }

-- CHECK: define i1 @"_S4bool2!_4bool4BoolD4bool4BoolDfF"(i1) {
!_ : Bool -> Bool
-- CHECK: "_S4bool2!_4bool4BoolD4bool4BoolDfF":
-- CHECK:   switch i1 %0, label %trap [
-- CHECK:     i1 true, label %"_S4bool9#col0row0ByfF"
-- CHECK:     i1 false, label %"_S4bool9#col0row1ByfF"
-- CHECK:   ]
-- CHECK-DAG: "_S4bool9#col0row0ByfF":
-- CHECK-DAG:   ret i1 false
! true = false
-- CHECK-DAG: "_S4bool9#col0row1ByfF":
-- CHECK-DAG:   ret i1 true
! false = true
-- CHECK: trap:
-- CHECK:   unreachable
-- CHECK: }

-- CHECK: define i1 @_S4bool13if_then_else_4bool4BoolD4bool4BoolD_4bool4BoolD4bool4BoolDtfF(i1, i1, i1) {
if_then_else_ : Bool -> Bool -> Bool -> Bool
-- CHECK: _S4bool13if_then_else_4bool4BoolD4bool4BoolD_4bool4BoolD4bool4BoolDtfF:
-- CHECK:   switch i1 %0, label %trap [
-- CHECK:     i1 true, label %"_S4bool9#col0row0ByfF"
-- CHECK:     i1 false, label %"_S4bool9#col0row1ByfF"
-- CHECK:   ]
-- CHECK-DAG: "_S4bool9#col0row0ByfF":
-- CHECK-DAG:   ret i1 %1
if true then x else _ = x
-- CHECK-DAG: "_S4bool9#col0row1ByfF":
-- CHECK-DAG:   ret i1 %2
if false then _ else x = x
-- CHECK: trap:
-- CHECK:   unreachable
-- CHECK: }
